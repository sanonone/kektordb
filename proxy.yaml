port: ":9092"
target_url: "http://localhost:11434"

# Configurazione Embedder (usa il tuo modello locale)
embedder_type: "ollama_api"
embedder_url: "http://localhost:11434/api/embeddings"
embedder_model: "nomic-embed-text:latest"
embedder_timeout: 60s

# RAG Automatico
rag_enabled: true
rag_index: "knowledge_base"  # Deve coincidere con l'indice popolato dai Vectorizer!
rag_top_k: 6
# RAG usa SIMILARITÀ (Higher is Better, 0.0-1.0)
rag_threshold: 0.6         # Ignore chunks with similarity score < 0.6
rag_use_hybrid: false # Cerca anche per parole chiave
rag_hybrid_alpha: 0.7      # 70% Vettore, 30% Keywords
rag_use_graph: true        # Recupera automaticamente contesto prev/next
rag_use_hyde: true
# System Prompt Template
# Usa {{context}} per iniettare i dati trovati e {{query}} per la domanda originale.
# Il simbolo '|' permette stringhe multilinea in YAML.
rag_system_prompt: |
  You are an expert technical assistant. You have access to a local knowledge base.
  
  CONTEXT DATA:
  {{context}}
  
  INSTRUCTIONS:
  1. Analyze the Context Data above carefully. Pay attention to Document titles.
  2. Answer the user's Question using ONLY the information present in the Context.
  3. If the Context contains conflicting information, mention it.
  4. If the Context does not contain the answer, perform the following check:
     - Is the question about general knowledge? (e.g., "Write python code"). If yes, answer normally.
     - Is the question about specific data? (e.g., "What is project X?"). If yes, state: "I don't have that information in my documents."
  5. Cite the Document name if available.

  QUESTION:
  {{query}}

# Firewall (Prompt Guard)
firewall_enabled: true
firewall_index: "prompt_guard"
# Firewall usa DISTANZA (Lower is Better)
firewall_threshold: 0.25 # Block if distance < 0.25
block_message: "I cannot fulfill this request as it violates safety policies."

# Semantic Cache
cache_enabled: true
cache_index: "semantic_cache_test"
# Cache usano DISTANZA (Lower is Better)
cache_threshold: 0.1 # Cache hit if distance < 0.1
cache_ttl: "5s"        
max_cache_items: 100

cache_vacuum_interval: "2s" 
cache_delete_threshold: 0.0 # 0.0 = Pulisci sempre se c'è anche solo 1 cancellazione
